series: trusty
relations:
- - keystone:shared-db
  - mysql:shared-db
- - glance:shared-db
  - mysql:shared-db
- - glance:identity-service
  - keystone:identity-service
applications:
  mysql:
    charm: cs:~openstack-charmers-next/percona-cluster
    num_units: 1
    # workaround while awaiting release of next version of python-libjuju with
    # model-constraints support
    constraints:
      virt-type=kvm
  keystone:
    series: trusty
    charm: ../../../keystone
    num_units: 3
    # workaround while awaiting release of next version of python-libjuju with
    # model-constraints support
    constraints:
      virt-type=kvm
  glance:
    charm: cs:~openstack-charmers-next/glance
    num_units: 1
    # workaround while awaiting release of next version of python-libjuju with
    # model-constraints support
    constraints:
      virt-type=kvm
